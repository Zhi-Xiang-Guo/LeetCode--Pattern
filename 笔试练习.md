# 刷题

## LC - [670. 最大交换](https://leetcode.cn/problems/maximum-swap/) - 模拟

```java
class Solution {
    // 找到降序(非升序)结束后的最大值及其最大索引，并将其和降序(非升序)中小于该值的最小索引交换
    // 从 9 递减到 digits[i]+1看有没有某个数字 d > digits[i]，并且它的 last[d] 在 i 后面
    // 说明我们可以交换，让当前位变得更大 一旦找到，交换并立即返回结果（因为只允许交换一次）
    public int maximumSwap(int num) {
        char[] digits = Integer.toString(num).toCharArray();「转char」
        int n = digits.length;
        int[] last = new int[10]; // 记录每个数字最后出现的位置

        // 保证多次出现 是最后那个
        for (int i = 0; i < n; i++) {
            last[digits[i] - '0'] = i;
        }

        // 从左往右扫描每一位
        for (int i = 0; i < n; i++) {
            // 尝试从9到当前位+1寻找更大的数，交换
            for (int d = 9; d > digits[i] - '0'; d--) {
                if (last[d] > i) {
                    // 交换
                    char temp = digits[i];
                    digits[i] = digits[last[d]];
                    digits[last[d]] = temp;
                    return Integer.parseInt(new String(digits));「转Int」
                }
            }
        }

        return num;
    }
}
```

## [788. 旋转数字](https://leetcode.cn/problems/rotated-digits/) - 模拟

```java
class Solution {
    public int rotatedDigits(int n) {
        int ans = 0;
        out:for (int i = 1; i <= n; i++) {
            boolean ok = false;
            int x = i;
            while (x != 0) {
                int t = x % 10;
                x /= 10;
                // 每位数字逐个
                if (t == 2 || t == 5 || t == 6 || t == 9) ok = true;//会变（2569）- 好数
                else if (t == 3 && t == 4 && t == 7) continue out;//非有效翻转数（347）-则必然不是好数
            }
            if (ok) ans++;
        }
        return ans;
    }
}
```

## [319. 灯泡开关](https://leetcode.cn/problems/bulb-switcher/) - 数学 [672. 灯泡开关 Ⅱ](https://leetcode.cn/problems/bulb-switcher-ii/)





## [13. 罗马数字转整数](https://leetcode.cn/problems/roman-to-integer/) 、[12. 整数转罗马数字](https://leetcode.cn/problems/integer-to-roman/)

13：「S1：打表 二个优先级大」「S2hashmap存映射 、优化可用switch case

12：「S1：贪心 + 匹配」 「S2 数组范围有限 直接按每个数位 打表成数组 优化：static + sb拼接」



## 模拟 + 数学 — 最少steps to turn array into odd 

![img](assets/1752553283473-9ac70143-88f0-41be-a8da-ce0c4c0e1f30.png)

思路：全偶数 得找个一直 /2到1 最小操作那个 

有odd 其实就是合并次数 - 偶数数量

```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int t = scanner.nextInt(); // 测试用例数量

        while (t-- > 0) {
            int n = scanner.nextInt(); // 数列长度
            int[] nums = new int[n];   // 数列
            boolean hasOdd = false;    // 是否存在奇数
            int evenCount = 0;         // 偶数的数量
            int minBitLength = 32;     // 最小 bit_length（初始设为最大值）

            for (int i = 0; i < n; i++) {
                nums[i] = scanner.nextInt();
                if (nums[i] % 2 == 0) {
                    evenCount++;
                    int x = nums[i];
                    int cnt = 0;
                    // 计算 bit_length（二进制末尾的连续 0 的个数）
                    while (x % 2 == 0) {
                        cnt++;
                        x /= 2;
                    }
                    minBitLength = Math.min(minBitLength, cnt);
                } else {
                    hasOdd = true;
                }
            }

            // 分情况计算最少操作次数
            if (hasOdd) {
                System.out.println(evenCount);
            } else {
                System.out.println(evenCount + 「minBitLength - 1 steps turn into odd and 
                evenCount -1 actually);
            }
        }
        scanner.close();
    }
}
```

## 模拟 - 最短周期

小红有一个长度为n的字符串s，由0、1和 * 组成，可以把*替换成0或者1，小红想知道替换后的字符串的**最短周期是多少** 如果一个字符串每一个位置的字母都与后k位的字母相同，那么k即为该字符串的一个周期。

形式化的说，如果存在一个正整数k 使得对于所有的 i 属于[1,n - k] 都有 s[i]= s[i+k] ，那么称k是字符串s的周期。

<details class="lake-collapse"><summary id="u80209607"><span class="ne-text" style="color: black">输入</span></summary><p id="u557af0f2" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">输入描述  第一行输入一个长度为n(1&lt;=n&lt;=1e3)，且只由0、1和*组成的字符串s。</span></p><p id="u31dd961e" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">输出描述  在一行上输出一个整数，表示替换后的字符串的最短周期。</span></p><p id="u3022de58" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">示例1</span></p><p id="ub739ddcb" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">输入  1</span><em><span class="ne-text" style="color: black">011</span></em><span class="ne-text" style="color: black">0*1</span></p><p id="u8354f1c0" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">输出 4</span></p><p id="u40a2d3b4" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">说明 一共有六种替换方式，其中 100110011拥有最短周期。</span></p></details>

<details class="lake-collapse"><summary id="u22552630"><span class="ne-text" style="color: black">思路与代码</span></summary><p id="u74db5233" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">从1-n枚举周期，对于每一个周期</span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(108, 158, 232); background-color: rgba(27, 31, 35, 0.05)">k</span></code><span class="ne-text" style="color: black">，将字符串分成多个</span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(108, 158, 232); background-color: rgba(27, 31, 35, 0.05)">k</span></code><span class="ne-text" style="color: black">长度的部分，检查每一部分在相同位置上的字符是否可以相同。如果</span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(108, 158, 232); background-color: rgba(27, 31, 35, 0.05)">k</span></code><span class="ne-text" style="color: black">可以作为周期，则记录最小的周期。</span></p><p id="u83489da8" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">「不是真的替换 * 就是万能」</span></p><p id="u739c1619" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black"></span></p><p id="u28d9fd2b" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black"></span></p><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="u89cc8960" data-lake-index-type="0" style="text-align: left"><span class="ne-text" style="color: rgb(64, 64, 64)">组0 (</span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">i % 2 == 0</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">): 位置 0, 2, 4 →</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">s[0]='1'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">,</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">s[2]='1'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">,</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">s[4]='*'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">→ 组0的字符集合</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">{'1'}</span></strong></code></li><li id="ud6a00150" data-lake-index-type="0" style="text-align: left"><span class="ne-text" style="color: rgb(64, 64, 64)">组1 (</span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">i % 2 == 1</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">): 位置 1, 3, 5 → </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">s[1]='0'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">, </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">s[3]='0'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">, </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">s[5]='1'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> → 组1的字符集合 </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">{'0', '1'}</span></strong></code></li></ul><p id="u1d148b76" class="ne-p" style="margin: 0; padding: 0; min-height: 24px; text-align: left"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)"></span></strong></p><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="u04dc37ab" data-lake-index-type="0"><span class="ne-text" style="color: rgb(64, 64, 64)">尝试 </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">k = 1</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">：</span></li></ul><ul class="ne-list-wrap" style="margin: 0; padding-left: 23px; list-style: none"><ul ne-level="1" class="ne-ul" style="margin: 0; padding-left: 23px; list-style: circle"><li id="u67f86657" data-lake-index-type="0"><span class="ne-text" style="color: rgb(64, 64, 64)">分组：</span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">g[0] = {'1', '0', '1'}</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">（因为</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">s[0]='1'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">,</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">s[1]='0'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">,</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">s[2]='1'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">, ...）</span></li><li id="ud8d1c38e" data-lake-index-type="0"><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">g[0]</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">包含</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">'0'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">和</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">'1'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">，所以</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">k=1</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">不可行。</span></li></ul></ul><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="u98e7ad37" data-lake-index-type="0"><span class="ne-text" style="color: rgb(64, 64, 64)">尝试</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">k = 2</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">：</span></li></ul><ul class="ne-list-wrap" style="margin: 0; padding-left: 23px; list-style: none"><ul ne-level="1" class="ne-ul" style="margin: 0; padding-left: 23px; list-style: circle"><li id="ue6cc193d" data-lake-index-type="0"><span class="ne-text" style="color: rgb(64, 64, 64)">分组：</span></li></ul></ul><ul class="ne-list-wrap" style="margin: 0; padding-left: 23px; list-style: none"><ul class="ne-list-wrap" style="margin: 0; padding-left: 23px; list-style: none"><ul ne-level="2" class="ne-ul" style="margin: 0; padding-left: 23px; list-style: square"><li id="u78f38e8e" data-lake-index-type="0"><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">g[0] = {s[0], s[2], s[4]} = {'1', '1', '*'}</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">→</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">{'1'}</span></strong></code></li><li id="u4af2106e" data-lake-index-type="0"><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">g[1] = {s[1], s[3], s[5]} = {'0', '0', '1'}</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">→</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">{'0', '1'}</span></strong></code></li></ul></ul></ul><ul class="ne-list-wrap" style="margin: 0; padding-left: 23px; list-style: none"><ul ne-level="1" class="ne-ul" style="margin: 0; padding-left: 23px; list-style: circle"><li id="uf866dac5" data-lake-index-type="0"><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">g[1]</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">包含</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">'0'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">和</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">'1'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">，所以</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">k=2</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">不可行。</span></li></ul></ul><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="u04c651a0" data-lake-index-type="0"><span class="ne-text" style="color: rgb(64, 64, 64)">尝试</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">k = 3</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">：</span></li></ul><ul class="ne-list-wrap" style="margin: 0; padding-left: 23px; list-style: none"><ul ne-level="1" class="ne-ul" style="margin: 0; padding-left: 23px; list-style: circle"><li id="u1a5346d3" data-lake-index-type="0"><span class="ne-text" style="color: rgb(64, 64, 64)">分组：</span></li></ul></ul><ul class="ne-list-wrap" style="margin: 0; padding-left: 23px; list-style: none"><ul class="ne-list-wrap" style="margin: 0; padding-left: 23px; list-style: none"><ul ne-level="2" class="ne-ul" style="margin: 0; padding-left: 23px; list-style: square"><li id="uad6ec1b2" data-lake-index-type="0"><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">g[0] = {s[0], s[3], s[6]} = {'1', '0', '1'}</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">→</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">{'0', '1'}</span></strong></code></li><li id="u271462d3" data-lake-index-type="0"><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">g[1] = {s[1], s[4]} = {'0', '*'}</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">→</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">{'0'}</span></strong></code></li><li id="u4d9b6471" data-lake-index-type="0"><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">g[2] = {s[2], s[5]} = {'1', '1'}</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">→</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">{'1'}</span></strong></code></li></ul></ul></ul><ul class="ne-list-wrap" style="margin: 0; padding-left: 23px; list-style: none"><ul ne-level="1" class="ne-ul" style="margin: 0; padding-left: 23px; list-style: circle"><li id="uecd35bc3" data-lake-index-type="0"><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">g[0]</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> 包含 </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">'0'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> 和 </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">'1'</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">，所以 </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">k=3</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> 不可行。</span></li></ul></ul></details>

```java
public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        String s = scanner.nextLine().trim();
        int result = getShortestPeriod(s);
        System.out.println(result);
    }

    public static int getShortestPeriod(String s) {
        int n = s.length();
        
        // 从最小可能的周期1开始尝试
        for (int k = 1; k <= n; k++) {
            // 用于存储每个组中的字符
            Set<Character>[] groups = new HashSet[k];
            for (int i = 0; i < k; i++) {
                groups[i] = new HashSet<>();
            }
            
            // 遍历字符串，将字符分配到对应的组
            for (int i = 0; i < n; i++) {
                char c = s.charAt(i);
                if (c != '*') {
                    groups[i % k].add(c);
                }
            }
            
            // 检查所有组是否满足条件
            boolean valid = true;
            for (Set<Character> group : groups) {
                // 如果某个组同时包含0和1，则这个k不可能是周期
                if (group.size() >= 2) {
                    valid = false;
                    break;
                }
            }
            
            // 如果当前k满足条件，直接返回（因为是从小到大检查的）
            if (valid) {
                return k;
            }
        }
        
        // 如果没有找到更小的周期，返回字符串长度（周期为n）
        return n;
    }
}
```

## 模拟 + 直线斜率 

题目描述

二维平面上有几 个整点 a[1],a[2],·..,a[n]，其中第个点的坐标为(i,a[i])。

小苯想知道有多少个点对 , （`**i < j**`）j 满足第i个点和第j个点的连线所在的直线恰好经过原点，请你帮他算一算吧。

<details class="lake-collapse"><summary id="u0e0e2d99"></summary><h4 id="ym4F1" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><strong><span class="ne-text" style="color: black">输入描述</span></strong></h4><p id="u9e427ec9" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">第一行输入一个正整数n(2 &lt;= n &lt; =2e5)代表整点数量。第二行输入n个正整数 a[1],a[2],·..,a[n]](1 &lt;= a[i]&lt; 1e9)代表整点的纵坐标。</span></p><h4 id="oToAB" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><strong><span class="ne-text" style="color: black">输出描述</span></strong></h4><p id="u80db7b88" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">在一行上输出一个正整数，表示连线所在直线经过原点的点对个数。</span></p><h4 id="pRhbs" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><strong><span class="ne-text" style="color: black">示例1</span></strong></h4><h4 id="JY843" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><strong><span class="ne-text" style="color: black">输入</span></strong></h4><pre data-language="plain" id="I7mJ9" class="ne-codeblock language-plain" style="border: 1px solid #e8e8e8; border-radius: 2px; background: #f9f9f9; padding: 16px; font-size: 13px; color: #595959"><code>5
1 2 4 4 5</code></pre><h4 id="KYmaE" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><strong><span class="ne-text" style="color: black">输出</span></strong></h4><p id="u73538729" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text">6</span></p></details>

思路：

两点 `**(i, a[i])**` 和 `**(j, a[j])**` 的连线经过原点，当且仅当它们的斜率相同 

a[i]/i == a[j]/j 、为了避免浮点数精度问题，可以交叉相乘得到 a[i] * j == a[j] * i

But 会有溢出可能 2e5*1e9 = 2e14

法1：Int：2×10^9 long:9×10^18 这里改long可以 or 

法2：最简分数

![img](assets/1752579067080-642ee802-a1ea-470a-8c31-d1bbd1ae589e.png)





题目中 n≤2×105，双重循环的时间复杂度是 O(n2)=4×1010，远超时间限制（通常 108 次操作是极限）



数学组合：用哈希表统计斜率出现的次数，然后计算组合数 C(m,2)=m(m−1)/2 其实就是两两配对

## 模拟 + 枚举技巧 数学转换

<details class="lake-collapse"><summary id="ud5594e93"></summary><h4 id="MQeQ2" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><strong><span class="ne-text" style="color: black">题目描述</span></strong></h4><p id="u98aadbe7" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">小苯面前有n 堆糖果，其中第i堆糖果里有a[i]个糖果，小苯现在希望从中选择恰好两堆糖果带走，选择后他会施法将自己的糖果数量乘上k，剩下的所有糖果都是格格的，他希望他和格格的糖果数量尽可能接近，假设小苯拿走的糖果数量为x，格格拿走的数量为 y，即他希望:|k*x- y|的值尽可能小 请你帮他求出这个最小值吧。</span></p><h4 id="vBqjS" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><strong><span class="ne-text" style="color: black">输入描述</span></strong></h4><p id="u7b4f53d5" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">第一行输入两个正整数n和 k (3 &lt;= n ≤ 2e5;1&lt;= k &lt;= 1e9)代表糖果的堆数和计算的系数</span></p><p id="ucdcae2e1" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">第二行输入 n 个整数 a[1],a[2],...,a[n](1 &lt;= a[i]&lt; =1e9)代表每堆糖果的数量。</span></p><h4 id="M8iY9" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><strong><span class="ne-text" style="color: black">输出描述</span></strong></h4><p id="u97b97e3a" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">在一行上输出一个正整数，表示题目所述的最小值。</span></p><h4 id="Boh68" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><strong><span class="ne-text" style="color: black">示例</span></strong></h4><pre data-language="plain" id="VDHZI" class="ne-codeblock language-plain" style="border: 1px solid #e8e8e8; border-radius: 2px; background: #f9f9f9; padding: 16px; font-size: 13px; color: #595959"><code>5 1 
1 2 3 4 5</code></pre><h4 id="A9qKc" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><strong><span class="ne-text" style="color: black"></span></strong></h4><pre data-language="plain" id="cGJWJ" class="ne-codeblock language-plain" style="border: 1px solid #e8e8e8; border-radius: 2px; background: #f9f9f9; padding: 16px; font-size: 13px; color: #595959"><code>1</code></pre><h4 id="Eib39" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><strong><span class="ne-text" style="color: black">说明</span></strong></h4><p id="u200084cd" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">小苯可以选择:第2堆和第5堆糖果，这样一来他能得到 (a[2]+ a[5])*k=7颗糖果，格格拿走剩下的8颗，因此两人的糖果数量之差为 1.可以证明不存在更优的解</span></p><h4 id="FMNCd" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><strong><span class="ne-text" style="color: black">题目思路</span></strong></h4><p id="u92602b91" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: black">首先计算所有糖果的总和</span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(108, 158, 232); background-color: rgba(27, 31, 35, 0.05)">sum</span></code><span class="ne-text" style="color: black">。</span></p><p id="u9fc12bb2" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(64, 64, 64)">有</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">n</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">堆糖果，第</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">i</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">堆有</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">a[i]</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">个糖果。小苯选择</span><strong><span class="ne-text" style="color: rgb(64, 64, 64)">恰好两堆</span></strong><span class="ne-text" style="color: rgb(64, 64, 64)">糖果带走，并将自己的糖果数量乘以</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">k</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">。剩下的糖果归格格。目标是让</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">|k * x - y|</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">最小，其中：</span></p><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="u4b3b6b3e" data-lake-index-type="0"><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">x</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">是小苯拿走的糖果总数（两堆之和），</span></li><li id="u00452ec4" data-lake-index-type="0"><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">y</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">是格格拿走的糖果总数（总和</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">sum</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><span class="ne-text" style="color: rgb(64, 64, 64)">减去</span><span class="ne-text" style="color: rgb(64, 64, 64)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><strong><span class="ne-text" style="color: rgb(64, 64, 64); background-color: rgb(236, 236, 236)">x</span></strong></code><span class="ne-text" style="color: rgb(64, 64, 64)">）。</span></li></ul><h3 id="4e261845" style="font-size: 20; line-height: 28px; margin: 16px 0 5px 0"><span class="ne-text" style="color: rgb(64, 64, 64)">数学转化</span></h3><p id="u2aa9a256" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><img src="https://cdn.nlark.com/yuque/0/2025/png/43004048/1752580881032-d5c7470f-03c5-457e-b887-cd1e8d88e369.png" width="698.1818030491352" title="" crop="0,0,1,1" id="uac298ab0" class="ne-image"></p><p id="u1e9b56b8" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"></p></details>

```java
import java.util.*;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt();
        long k = sc.nextLong();
        long[] a = new long[n];
        long sum = 0;
        
        // 读取数据并计算总和
        for (int i = 0; i < n; i++) {
            a[i] = sc.nextLong();
            sum += a[i];
        }
        
        // 计算目标值
        double xTarget = (double)sum / (k + 1);
        
        // 排序数组
        Arrays.sort(a);
        
        long minDiff = Long.MAX_VALUE;
        long bestSum = 0;
        
        // 双指针法寻找最接近xTarget的两数之和
        int left = 0, right = n - 1;
        while (left < right) {
            long currentSum = a[left] + a[right];
            double diff = Math.abs(currentSum - xTarget);
            if (diff < minDiff) {
                minDiff = (long)diff;
                bestSum = currentSum;
            }
            if (currentSum < xTarget) {
                left++;
            } else {
                right--;
            }
        }
        
        // 计算最终结果
        long result = Math.abs(bestSum * (k + 1) - sum);
        System.out.println(result);
    }
}
```

## 贪心思想 - 合并

<details class="lake-collapse"><summary id="udcfe883a"></summary><p id="ub6d0275e" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><img src="https://cdn.nlark.com/yuque/0/2025/png/43004048/1752641291124-98da2b25-e561-4e65-94b2-c3676ec1a08d.png" width="643.6363496859215" title="" crop="0,0,1,1" id="udb894178" class="ne-image"></p></details>

<details class="lake-collapse"><summary id="uf733f81c"><span class="ne-text">思路</span></summary><p id="u67224fbc" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><img src="https://cdn.nlark.com/yuque/0/2025/png/43004048/1752641327546-11482886-0aa5-4377-a616-d102794e77db.png" width="604.545441442285" title="" crop="0,0,1,1" id="u73e301cc" class="ne-image"></p><p id="uaf31e0c6" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text">【其实就是 2 - n-1</span></p><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="u8bae991f" data-lake-index-type="0"><span class="ne-text" style="color: rgb(64, 64, 64)">排序后，我们总是让小元素先被合并，这样：</span></li></ul><ul class="ne-list-wrap" style="margin: 0; padding-left: 23px; list-style: none"><ul ne-level="1" class="ne-ul" style="margin: 0; padding-left: 23px; list-style: circle"><li id="ub3f263a9" data-lake-index-type="0"><span class="ne-text" style="color: rgb(64, 64, 64)">每次合并时，当前最大的元素会被尽可能晚地参与合并</span></li><li id="u7347051a" data-lake-index-type="0"><span class="ne-text" style="color: rgb(64, 64, 64)">较小的元素会先被"消耗"掉</span></li></ul></ul><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="u5fa8e4ff" data-lake-index-type="0"><span class="ne-text" style="color: rgb(64, 64, 64)">最终，最大的元素只会被计算一次（在最后一次合并）</span></li></ul><p id="ube40f0dd" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"></p><p id="u7a5b26a5" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text">1 2 3 -&gt; 2 3 -&gt; 3 「3 + 3」</span></p><p id="uf0b8ed1c" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text">3 5 9 11 -&gt; 5 9 11 -&gt;9 11 -&gt; 11</span></p></details>

## 模拟 - 魔法环

<details class="lake-collapse"><summary id="ude062c00"></summary><p id="u9414a12a" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text"> </span><img src="https://cdn.nlark.com/yuque/0/2025/png/43004048/1752644096707-8bb43eaf-c9e2-40ac-932a-fa49497b4cad.png" width="569.999987645583" title="" crop="0,0,1,1" id="u23c45398" class="ne-image"></p></details>

<details class="lake-collapse"><summary id="u04ae7922"></summary><p id="uccde65f7" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><img src="https://cdn.nlark.com/yuque/0/2025/png/43004048/1752644161026-83f3f80d-0b4b-4df3-8cb6-ecf0ace72ab4.png" width="599.0908961059636" title="" crop="0,0,1,1" id="uca039705" class="ne-image"></p><pre data-language="java" id="QAoIX" class="ne-codeblock language-java" style="border: 1px solid #e8e8e8; border-radius: 2px; background: #f9f9f9; padding: 16px; font-size: 13px; color: #595959"><code>int res = Integer.MIN_VALUE; // 初始化为最小值
// 枚举断开位置 k (0 到 n-1)
for (int k = 0; k &lt; n; k++) {
    int S = 0;
    // 构造线性序列b[0..n-1]
    for (int j = 0; j &lt; n; j++) { // j 代表 b 数组的 0-based 索引
        // b[j] 对应原始数组 a 中的索引
        // b[0] 对应 a[k]
        // b[1] 对应 a[(k+1)%n]
        // b[j] 对应 a[(k+j)%n]
        int current_a_idx = (k + j) % n; // 直接计算 0-based 索引
    
        int coefficient = j + 1; // 系数还是 1, 2, 3...，所以是 j+1
        int sign = (coefficient % 2 == 1) ? 1 : -1; // 根据系数的奇偶性确定符号
        S += sign * coefficient * a[current_a_idx];
    }
    res = Math.max(res, S);
}</code></pre></details>

<details class="lake-collapse"><summary id="ueee5ae0c"></summary><p id="u2dafa682" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><img src="https://cdn.nlark.com/yuque/0/2025/png/43004048/1752645342630-d4e5642c-a32e-4939-b89e-5da84dac24a3.png" width="680.9090761507841" title="" crop="0,0,1,1" id="ub1b49952" class="ne-image"></p><p id="ufe82fa74" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"></p><p id="u315dd297" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><img src="https://cdn.nlark.com/yuque/0/2025/png/43004048/1752645351293-ec353c86-4a1b-494d-a4b1-ea19e11c6329.png" width="742.727256629093" title="" crop="0,0,1,1" id="ucfdf754e" class="ne-image"></p><p id="u025db1fb" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"></p><p id="u00dca3ad" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><img src="https://cdn.nlark.com/yuque/0/2025/png/43004048/1752645369457-5d9f12f7-883c-4106-b11f-7f086cc2100b.png" width="744.5454384078668" title="" crop="0,0,1,1" id="u92f9d909" class="ne-image"></p><p id="u6a57b4d9" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text">为了确保结果始终在 </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text">0</span></code><span class="ne-text"> 到 </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text">n-1</span></code><span class="ne-text"> 之间，对于负数索引，常用的技巧是： </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text">int actual_idx = (target_idx % n + n) % n;</span></code></p></details>